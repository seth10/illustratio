(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{136:function(e,t,a){},138:function(e,t,a){},141:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(44),i=a.n(r),o=(a(73),a(75),a(31)),s=a.n(o),c=a(45),m=a(19),u=a(20),d=a(23),p=a(21),h=a(24),E=a(149),g=a(152),f=a(153),b=a(18),v=a(144),y=a(150),k=a(145),N=a(154),w=a(146),x=a(147),O=a(151),A=a(148),j=(a(83),function(e){function t(){var e,a;Object(m.a)(this,t);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(a=Object(d.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).state={},a.handleRandom=function(){a.props.mongodb.db("illustratio").collection("artwork").aggregate([{$sample:{size:1}}]).asArray().then(function(e){a.props.history.push("/artwork/"+e[0].id)})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"col-12 pt-4 pb-4"},l.a.createElement(v.a,null,l.a.createElement("h1",null,"illustratio"),l.a.createElement("p",null,"Experience cultural enlightenment in Baltimore")),l.a.createElement(y.a,null,l.a.createElement(y.a.Body,null,l.a.createElement("em",null,"illustratio")," is an app that informs you of artwork around Baltimore and provides fact about the medium of art.")),l.a.createElement("hr",null),this.props.isAuthed?l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,l.a.createElement(A.a,{onClick:this.handleRandom},"Show me art (random)")),l.a.createElement("p",null,l.a.createElement(A.a,null,"Last session")),l.a.createElement("p",null,l.a.createElement(A.a,null,"My favorites"))):l.a.createElement(l.a.Fragment,null,l.a.createElement("p",null,"Login to keep track of your patronage:"),l.a.createElement(k.a,null,l.a.createElement(N.a,{controlId:"formEmail"},l.a.createElement(w.a,{componentClass:x.a},"Email"),l.a.createElement(w.a,null,l.a.createElement(O.a,{type:"email",placeholder:"hack3r@gmail.com",inputRef:function(t){return e.formEmail=t}}))),l.a.createElement(N.a,{controlId:"formPass"},l.a.createElement(w.a,{componentClass:x.a},"Password"),l.a.createElement(w.a,null,l.a.createElement(O.a,{type:"password",placeholder:"hunter2",inputRef:function(t){return e.formPass=t}}))),l.a.createElement(N.a,null,l.a.createElement(w.a,null,l.a.createElement(A.a,{bsStyle:"primary",onClick:function(){return e.props.handleEmailLogin(e.formEmail.value,e.formPass.value)}},"Login")))),l.a.createElement("hr",null),l.a.createElement("p",null,"Or, begin without logging in:"),l.a.createElement(A.a,{bsStyle:"warning",onClick:this.props.handleAnonLogin},"Continue without login")),l.a.createElement("div",{id:"scrollingBackground"}))}}]),t}(n.Component)),C=(a(136),function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={favorited:!1},a.handleFavorite=function(e){a.props.mongodb.db("illustratio").collection("artwork").updateOne({id:a.props.match.params.id},{$pull:{user_likes:a.props.client.auth.user.id}}),a.setState({favorited:e.target.checked})},a.props.mongodb.db("illustratio").collection("artwork").find({id:a.props.match.params.id}).asArray().then(function(e){if(a.setState({data:e[0]}),e[0].user_likes&&a.setState({favorited:e[0].user_likes.indexOf(a.props.client.auth.user.id)>=0}),e[0].data.type){var t=e[0].data.type.match(/\w+/g).map(function(e){return e.toLowerCase()});a.props.mongodb.db("illustratio").collection("materials").find({keyword:{$in:t}}).asArray().then(function(e){e[0]&&a.setState({typeFlavor:e[0].description})})}}),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.data?l.a.createElement("main",{role:"main",className:"container"},l.a.createElement("h1",{className:"mt-5"},this.state.data.data.name||"Untitled"),l.a.createElement("p",{className:"lead"},this.state.data.data.artists[0]||"Unattributed"),this.state.data.data.notes?l.a.createElement("div",{className:"input-group fake-input-group mb-3"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},"Notes")),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.data.data.notes,disabled:!0})):null,this.state.data.data.site?l.a.createElement("div",{className:"input-group fake-input-group mb-3"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},"Site")),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.data.data.site,disabled:!0})):null,this.state.data.data.address&&!this.state.data.data.address.endsWith("000Z")?l.a.createElement("div",{className:"input-group fake-input-group mb-3"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},"Address")),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.data.data.address,disabled:!0})):null,this.state.data.data.type?this.state.typeFlavor?l.a.createElement("div",{className:"card"},l.a.createElement("div",{className:"input-group fake-input-group mb-3"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},"Type")),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.data.data.type,disabled:!0})),l.a.createElement("p",{className:"card-body"},this.state.typeFlavor)):l.a.createElement("div",{className:"input-group fake-input-group mb-3"},l.a.createElement("div",{className:"input-group-prepend"},l.a.createElement("span",{className:"input-group-text"},"Type")),l.a.createElement("input",{type:"text",className:"form-control",value:this.state.data.data.type,disabled:!0})):null,this.state.data.data.images?l.a.createElement(l.a.Fragment,null,l.a.createElement("button",{className:"btn btn-secondary",type:"button","data-toggle":"collapse","data-target":"#imageSpoiler","aria-expanded":"false","aria-controls":"collapseExample"},"Image ",l.a.createElement("span",{className:"badge badge-danger"},"Spoiler")),l.a.createElement("div",{className:"collapse mt-1",id:"imageSpoiler"},l.a.createElement("img",{className:"img-fluid",src:this.state.data.data.images[0],alt:""}))):null,l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement("button",{className:"btn btn-primary btn-lg btn-block",type:"button","data-toggle":"collapse","data-target":"#visited","aria-expanded":"false","aria-controls":"collapseExample"},"I Visited This!")),l.a.createElement("div",{className:"collapse",id:"visited"},l.a.createElement("label",{htmlFor:"my-notes"},"My Notes"),l.a.createElement("textarea",{id:"my-notes",className:"form-control","aria-label":"With textarea"})),l.a.createElement("hr",null),l.a.createElement("input",{type:"checkbox",checked:this.state.favorited,onChange:this.handleFavorite})," I Love This!"):l.a.createElement("div",null)}}]),t}(n.Component)),S=(a(138),"illustratio-vdzkt"),L=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).handleAnonLogin=Object(c.a)(s.a.mark(function e(){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.auth.loginWithCredential(new b.a);case 2:a.setState({isAuthed:!0,authMethod:"anon"});case 3:case"end":return e.stop()}},e,this)})),a.handleEmailLogin=function(){var e=Object(c.a)(s.a.mark(function e(t,n){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.client.auth.loginWithCredential(new b.d(t,n));case 2:a.setState({isAuthed:!0,authMethod:"email"}),console.log(a.client.auth.user.id);case 4:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={isAuthed:!1},a.appId=S,b.c.hasAppClient(a.appId)?a.client=b.c.defaultAppClient:a.client=b.c.initializeDefaultAppClient(a.appId),a.mongodb=a.client.getServiceClient(b.b.factory,"mongodb-atlas"),a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement(E.a,null,l.a.createElement(l.a.Fragment,null,l.a.createElement(g.a,null,l.a.createElement(f.a,{exact:!0,path:"/",render:function(t){return l.a.createElement(j,Object.assign({isAuthed:e.state.isAuthed,authMethod:e.state.authMethod,mongodb:e.mongodb,handleAnonLogin:e.handleAnonLogin,handleEmailLogin:e.handleEmailLogin},t))}}),l.a.createElement(f.a,{exact:!0,path:"/artwork/:id",render:function(t){return l.a.createElement(C,Object.assign({isAuthed:e.state.isAuthed,mongodb:e.mongodb,client:e.client},t))}}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(l.a.createElement(L,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(141)},73:function(e,t,a){},83:function(e,t,a){}},[[68,2,1]]]);
//# sourceMappingURL=main.445a40d0.chunk.js.map